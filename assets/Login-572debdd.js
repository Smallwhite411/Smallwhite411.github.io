import{_ as D,a as F,b as L}from"./微信-eb789fc4.js";import{d as N,h as K,i as f,j as V,c as B,a as g,b as a,w as o,k as q,r as i,g as A,u as d,f as v,n as E,l as u,m as _,L as J,p as O,e as j,_ as z}from"./index-7930bd8f.js";const b=c=>(O("data-v-b7a37c11"),c=c(),j(),c),R={class:"bg"},T=q('<div class="heard" data-v-b7a37c11><div class="cloud" data-v-b7a37c11><img class="img1" src="'+D+'" alt="yun" data-v-b7a37c11><img class="img2" src="'+F+'" alt="logo" data-v-b7a37c11></div><h1 class="title" data-v-b7a37c11>KZ～</h1></div>',1),Z={class:"login_card"},G=b(()=>g("img",{class:"weixin-img",src:L,alt:"微信图片"},null,-1)),H=b(()=>g("text",null," 底部说明 ",-1)),M=N({__name:"Login",setup(c){let e=K({username:"admin",password:"123",phone:"",captcha:"",message:"",islogin:{isUser:!1,message:"",isPassword:!1}}),h=f("");const m=f("1"),w=t=>{m.value=t},y=E();V(()=>e.islogin.message,(t,s)=>{console.log("newValue",t),h.value=t},{immediate:!0});const x=async t=>{console.log("Success:",t);let s=await u("/login/personmessage",t);if(e.islogin.isUser=s.isUser,e.islogin.isPassword=s.isPassword,e.islogin.message=s.message,e.islogin.isPassword===!0&&e.islogin.isUser===!0){let r=await u("/getId/personmessage",{username:e.username});sessionStorage.setItem("userId",r);let n=await u("/getPosition/personmessage",{username:r});sessionStorage.setItem("position",JSON.stringify(n.position)),sessionStorage.setItem("rotation",JSON.stringify(n.rotation)),y.push({path:"/firstgameview"}),_.success(e.islogin.message),sessionStorage.setItem("username",e.username),console.log("iddddd",n,r)}else e.islogin.isPassword===!1&&e.islogin.isUser===!0?_.warning(e.islogin.message):_.error(e.islogin.message);e.message=s.message,console.log(s)},C=async t=>{await J("/remove/personmessage"),console.log("Failed:",t)};return(t,s)=>{const r=i("a-input"),n=i("a-form-item"),I=i("router-link"),p=i("a-button"),S=i("a-form"),P=i("a-tab-pane"),U=i("a-tabs"),k=i("Footer");return A(),B("div",R,[T,g("div",Z,[a(U,{type:"card",activeKey:m.value,"onUpdate:activeKey":s[2]||(s[2]=l=>m.value=l),onChange:w,centered:""},{default:o(()=>[a(P,{tab:"账户密码登录",key:"1"},{default:o(()=>[a(S,{name:"normal_login",model:d(e),onFinish:x,onFinishFailed:C},{default:o(()=>[a(n,{name:"username",rules:[{required:!0,message:"请输入手机号 / 用户名!"}]},{default:o(()=>[a(r,{placeholder:"请输入手机号 / 用户名",value:d(e).username,"onUpdate:value":s[0]||(s[0]=l=>d(e).username=l),style:{"border-bottom":"1px solid #DCDCDC"},bordered:!1},null,8,["value"])]),_:1}),a(n,{name:"password",rules:[{required:!0,message:"请输入密码!"}]},{default:o(()=>[a(r,{bordered:!1,type:"password",value:d(e).password,"onUpdate:value":s[1]||(s[1]=l=>d(e).password=l),style:{"border-bottom":"1px solid #DCDCDC"},placeholder:"请输入密码"},null,8,["value"])]),_:1}),a(n,null,{default:o(()=>[a(I,{style:{color:"#8C8D9B"},to:"/register"},{default:o(()=>[v("创建账号")]),_:1})]),_:1}),a(n,{name:"login"},{default:o(()=>[a(p,{type:"primary","html-type":"submit",style:{height:"56px","border-radius":"12px"},block:""},{default:o(()=>[v(" 登录 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["activeKey"]),a(p,{size:"large",shape:"circle"},{default:o(()=>[G]),_:1})]),a(k,{class:"footer"},{default:o(()=>[H]),_:1})])}}});const X=z(M,[["__scopeId","data-v-b7a37c11"]]);export{X as default};
